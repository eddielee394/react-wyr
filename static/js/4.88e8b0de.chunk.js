(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1627:function(e,t,a){"use strict";a.r(t);var r=a(9),n=a(10),s=a(14),i=a(12),l=a(13),c=a(18),o=a(15),m=function(){return function(e,t){return e({type:"[LEADERBOARD] GET USERS",payload:t().auth.users})}},u=function(){return function(e){return e({type:"[LEADERBOARD] GET USERS STATS"})}},d=a(8),p=a(23),b={entities:[],searchText:"",routeParams:{}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[LEADERBOARD] GET USERS":return Object(d.a)({},e,{entities:o.a.keyBy(t.payload,"id"),routeParams:t.routeParams});case"[LEADERBOARD] SET SEARCH TEXT":return Object(d.a)({},e,{searchText:t.searchText});case"[LEADERBOARD] GET USERS STATS":var a=o.a.map(e.entities,function(e){return o.a.add(Object.keys(e.data.answers).length,e.data.questions.length)}),r=Object.keys(e.entities).map(function(t){var r=Object.keys(e.entities[t].data.answers).length,n=e.entities[t].data.questions.length,s=o.a.add(r,n),i=p.c.rankArray(s,a);return Object(d.a)({},e.entities[t],{data:Object(d.a)({},e.entities[t].data,{globalRank:i,questionsAnswered:r,questionsAsked:n})})}),n=o.a.keyBy(r,"id");return Object(d.a)({},e,{entities:Object(d.a)({},e.entities,n)});default:return e}},y=a(180),f=a(0),g=a.n(f),E=a(20),v=a(19),N=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers(),this.props.getUsersStats()}},{key:"componentDidUpdate",value:function(e,t){o.a.isEqual(this.props.user,e.user)&&o.a.isEqual(this.props.users,e.users)||(this.props.getUsers(),this.props.getUsersStats())}},{key:"render",value:function(){var e=this;return g.a.createElement(c.k,{classes:{contentCardWrapper:"p-16 sm:p-24 pb-80 sm:pt-40",leftSidebar:"w-256 border-0 sm:pt-40"},content:g.a.createElement(T,null),leftSidebarContent:g.a.createElement(W,null),sidebarInner:!0,onRef:function(t){e.pageLayout=t},innerScroll:!0})}}]),t}(f.Component);var O=Object(y.a)("leaderboard",h)(Object(E.connect)(function(e){var t=e.leaderboard,a=e.auth;return{users:t.entities,searchText:t.searchText,user:a.user}},function(e){return Object(v.c)({getUsers:m,getUsersStats:u},e)})(N)),j=a(2),A=a(21),k=a(42),S=(a(701),a(277)),x=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).getFilteredArray=function(e,t){var a=Object.keys(e).map(function(t){return e[t]});return 0===t.length?a:c.o.filterArrayByString(e,t)},a.handleUserProfileRedirect=function(e){},a.avatarClass=function(e){return 1===e?a.props.classes.goldAvatar:2===e?a.props.classes.silverAvatar:3===e?a.props.classes.bronzeAvatar:a.props.classes.avatar},a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.user,r=t.users,n=t.searchText,s=t.toggleStarredContact,i=this.getFilteredArray(r,n);return g.a.createElement(c.a,{animation:"transition.slideUpIn",delay:300},g.a.createElement(S.b,{className:"-striped -highlight border-0",getTrProps:function(t,a,r){return{className:"cursor-pointer",onClick:function(t,r){a&&e.handleUserProfileRedirect(a.original)}}},data:i,columns:[{Header:"Global Rank",accessor:"data.globalRank",Cell:function(t){return g.a.createElement(j.b,{className:e.avatarClass(t.value)},t.value)},className:"justify-center",sortable:!0,maxWidth:85},{Header:"",accessor:"data.avatarURL",Cell:function(e){return g.a.createElement(j.b,{className:"mr-8",alt:e.original.name,src:e.value})},className:"justify-center",width:64,sortable:!1},{Header:"Username",accessor:"data.displayName",filterable:!0,className:"font-bold"},{Header:"Questions Asked",accessor:"data.questionsAsked",filterable:!0},{Header:"Questions Answered",accessor:"data.questionsAnswered",filterable:!0},{Header:"",width:128,Cell:function(e){return g.a.createElement("div",{className:"flex items-center"},g.a.createElement(j.z,{onClick:function(t){t.stopPropagation(),s(e.original.id)}},a.starred&&a.starred.includes(e.original.id)?g.a.createElement(j.y,null,"star"):g.a.createElement(j.y,null,"star_border")))}}],defaultPageSize:10,defaultSorted:[{id:"data.globalRank"}],noDataText:"No results found"}))}}]),t}(f.Component);var T=Object(A.withStyles)(function(){return{avatar:{margin:10},goldAvatar:{margin:10,color:"#fff",backgroundColor:k.yellow.A700},silverAvatar:{margin:10,color:"#fff",backgroundColor:k.blueGrey[500]},bronzeAvatar:{margin:10,color:"#fff",backgroundColor:k.brown[500]}}},{withTheme:!0})(Object(E.connect)(function(e){var t=e.leaderboard;return e.auth,{users:t.entities,searchText:"",user:""}})(x)),R=a(16),C=a(5),w=a.n(C),I=a(44),U=a.n(I),L=(a(1),a(4)),D=a.n(L),F=a(125),q=g.a.createContext({});function z(e){var t=e.children,a=e.classes,r=e.className,n=U()(e,["children","classes","className"]);return g.a.createElement(q.Consumer,null,function(e){var s;return g.a.cloneElement(t,w()({className:D()((s={},Object(R.a)(s,a.root,e.dense),Object(R.a)(s,a.alignItemsFlexStart,"flex-start"===e.alignItems),s),r,t.props.className),childrenClassName:D()(Object(R.a)({},a.icon,e.dense),t.props.childrenClassName)},n))})}z.propTypes={},z.muiName="ListItemAvatar";var P=Object(F.a)(function(e){return{root:{width:36,height:36,fontSize:e.typography.pxToRem(18),marginRight:4},alignItemsFlexStart:{marginTop:4},icon:{width:20,height:20,fontSize:e.typography.pxToRem(20)}}},{name:"MuiListItemAvatar"})(z),B=a(625);function G(e){var t,a=e.classes,r=e.className,n=e.color,s=e.component,i=e.disableGutters,l=e.disableSticky,c=e.inset,o=U()(e,["classes","className","color","component","disableGutters","disableSticky","inset"]);return g.a.createElement(s,w()({className:D()(a.root,(t={},Object(R.a)(t,a["color".concat(Object(B.a)(n))],"default"!==n),Object(R.a)(t,a.inset,c),Object(R.a)(t,a.sticky,!l),Object(R.a)(t,a.gutters,!i),t),r)},o))}G.propTypes={},G.defaultProps={color:"default",component:"li",disableGutters:!1,disableSticky:!1,inset:!1},G.muiName="ListSubheader";var H=Object(F.a)(function(e){return{root:{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},gutters:e.mixins.gutters(),inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}},{name:"MuiListSubheader"})(G),J=a(30),M=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.user;return g.a.createElement("div",{className:"p-16 lg:p-24 lg:pr-4"},g.a.createElement(c.a,{animation:"transition.slideLeftIn",delay:200},g.a.createElement(j.O,{elevation:1,className:"rounded-8"},g.a.createElement("div",{className:"p-24 flex items-center"},g.a.createElement(j.b,{className:"mr-12",alt:a.data.displayName,src:a.data.avatarURL}),g.a.createElement(j.eb,null,a.data.displayName)),g.a.createElement(j.l,null),g.a.createElement(j.E,null,g.a.createElement(j.F,{button:!0,component:J.b,to:"/leaderboard",activeClassName:"active",className:t.listItem},g.a.createElement(j.y,{className:"list-item-icon text-16",color:"action"},"people"),g.a.createElement(j.J,{className:"truncate pr-0",primary:"All users",disableTypography:!0})),g.a.createElement(j.F,{button:!0,component:J.b,to:"/leaderboard/friends",activeClassName:"active",className:t.listItem},g.a.createElement(j.y,{className:"list-item-icon text-16",color:"action"},"restore"),g.a.createElement(j.J,{className:"truncate pr-0",primary:"Friends",disableTypography:!0})),g.a.createElement(j.F,{button:!0,component:J.b,to:"/leaderboard/favorites",activeClassName:"active",className:t.listItem},g.a.createElement(j.y,{className:"list-item-icon text-16",color:"action"},"star"),g.a.createElement(j.J,{className:"truncate pr-0",primary:"Favorites",disableTypography:!0})),g.a.createElement(j.l,null),g.a.createElement(H,null,g.a.createElement(j.eb,{variant:"subtitle2",className:"pt-16",gutterBottom:!0},"My Stats")),g.a.createElement(j.F,{className:t.listItem},g.a.createElement(j.y,{className:"list-item-icon text-16",color:"action"},"assignment_turned_in"),g.a.createElement(j.J,{className:"truncate pr-0",primary:"Completed",disableTypography:!0}),g.a.createElement(P,null,g.a.createElement(j.b,{className:t.listItemAvatar},a.data.questionsAnswered))),g.a.createElement(j.F,{className:t.listItem},g.a.createElement(j.y,{className:"list-item-icon text-16",color:"action"},"ballot"),g.a.createElement(j.J,{className:"truncate pr-0",primary:"Asked",disableTypography:!0}),g.a.createElement(P,null,g.a.createElement(j.b,{className:t.listItemAvatar},a.data.questionsAsked))),g.a.createElement(j.F,{className:t.listItem},g.a.createElement(j.y,{className:"list-item-icon text-16",color:"action"},"whatshot"),g.a.createElement(j.J,{className:"truncate pr-0",primary:"Current Rank",disableTypography:!0}),g.a.createElement(P,null,g.a.createElement(j.b,{className:t.listItemAvatar},a.data.globalRank)))))))}}]),t}(f.Component);var W=Object(A.withStyles)(function(e){return{listItem:{color:"inherit!important",textDecoration:"none!important",height:40,width:"calc(100% - 16px)",borderRadius:"0 20px 20px 0",paddingLeft:24,paddingRight:12,"&.active":{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText+"!important",pointerEvents:"none","& .list-item-icon":{color:"inherit"}}},listItemAvatar:{margin:5,width:25,height:25,fontSize:"1.5rem",backgroundColor:e.palette.primary.main}}},{withTheme:!0})(Object(E.connect)(function(e){var t=e.leaderboard,a=e.auth;return{user:o.a.find(t.entities,{id:a.user.id})}},function(e){return Object(v.c)({},e)})(M));t.default=function(){return g.a.createElement(O,null)}}}]);
//# sourceMappingURL=4.88e8b0de.chunk.js.map